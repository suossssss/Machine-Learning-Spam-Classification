 i did more test with your patch on top of todai s cv but the patch didn t help at all the follow is the result of the test test setup number creat a dev mdnumber with number scsi disk number creat a lvm volum group vg with the dev mdnumber number creat a lvm logic volum volnumb with vg number creat a xf fs with a command mkf xf f d sunit number swidth number dev vg volnumb meta data dev vg volnumb isiz number agcount number agsiz number blk data bsize number block number imaxpct number sunit number swidth number blk unwritten number name version number bsize number log intern log bsize number block number version number sunit number blk realtim none extsz number block number rtextent number test result number mount with quota enabl occasion kernel oop attach the file oopsnumb number mount without quota enabl occasion kernel oop attach the file oopsnumb number mount without quota enabl while md devic is in degrad mode alwai kernel oop attach the file oopsnumb thank jlee origin messag from eric sandeen to jame lee cc sent tuesdai august number number number number pm subject re kernel bug at filemap c number hi gui we treat md and lvm somewhat special and i wonder if in thi case md is mask the fact that you re us lvm and that might be where the problem start can you try thi patch which will caus lvm md to be treat the same to see if it help it s probabl not the final solut but it might offer some hint thank eric linux fs xf pagebuf page buf lock c number number tue aug number number number number number linux fs xf pagebuf page buf lock c tue aug number number number number number number number number number pagebuf target blocksiz target page cach size if major dev md major major dev evm major target pbr flag pbr align onli target pbr flag pbr sector onli els if major dev lvm blk major target pbr flag pbr sector onli els on mon number number number at number number jame lee wrote hi i m also have the exactli same problem test with number number number xf check out from sgi s cv on aug number on redhat number number kernel and userland tool ar compil with gcc number number number the follow is the result of some test scsidisk xf ok scsidisk raidnumb xf ok scsidisk lvm xf ok scsidisk raidnumb lvm xf ok scsidisk raidnumb lvm xf ok scsidisk raidnumb lvm xf kernel bug at filemap c number thi problem is alwai reproduc with the follow shell script bin sh mkraid dev mdnumber vgcreat volumegroup dev mdnumber lvcreat lnumberg ntestvolum volumegroup mkf xf f d size numberm dev volumegroup testvolum mount t xf dev volumegroup testvolum mnt onoatim nodiratim usrquota grpquota whenev i run the abov script mount command alwai gener kernel oop but if i insert some delai as of the follow then mount goe well eric sandeen xf for linux httpaddr emailaddr sgi inc number number number begin number oopsnumb dat m number numberd b r cnumbern numberdm number anumbertdg emailaddr vnumber emailaddr emailaddr emailaddr mnumber un f l number vnumberpim vnumber gaf r mnumberb m mnumber s numberyi tx w numbert tx dnumbero f o f l numberim wnumbern onumb numberv wnumberg emailaddr emailaddr m numberh number numberr v nnumberqi ee r emailaddr ir emailaddr emailaddr emailaddr y s u s x b c emailaddr mnumbert gnumbern number enumb dnumberinumbervnumb b f nnumberx ct numbert numbert numbert emailaddr emailaddr numberw t number n r u vnumberd b m emailaddr emailaddr m b emailaddr number t mnumbertn number p number n xq number emailaddr emailaddr emailaddr emailaddr emailaddr emailaddr emailaddr emailaddr emailaddr emailaddr emailaddr m t numberi numbermnumb emailaddr p i number numberz m dollar numberenumb b p dollarp elnumb q f dnumber numbernumb emailaddr mnumber inumb vennumberr dnumbera numberqt r f numberuo w s ut numberlnumberc r numberd number emailaddr emailaddr emailaddr m p vdollarwnumb dollart number x b p p q b emailaddr p p number i m b c number p numbercnumberr emailaddr enumberg z p p q mnumber p b f number d numberdi emailaddr q number b p dollarx w z emailaddr mnumber onumbervnumb r m wnumbern h ed b emailaddr p emailaddr p emailaddr number emailaddr mnumber emailaddr number emailaddr p x s numberu emailaddr p p p p p p numbervnumb c p p cnumberunumb q numberu emailaddr p p q p p q b c d number s f number f m numberx p p p number p p p number p p p number c w numberpnumberr p p m wnumberr fnumberfnumberfnumberfnumberfnumberpi numberql numberrnumb e b emailaddr m w number x y lnumber emailaddr m y b numbersqc w numberpnumbersi lnumber rnumber du s number p fnumbercnumbere et mnumbersqc e v unumberci lnumber r sdollarynumberdollarnumb p cnumberunumberdollarp et p emailaddr emailaddr emailaddr emailaddr r numberc cnumbernumb emailaddr r s w numbernumb p c t emailaddr numbersqc s s p y lnumber r v enumb number emailaddr q dnumber number p emailaddr q ad emailaddr q number v numbernumberh m lnumber q ac v numberi vnumber b pnumberb pnumberb tnumberb p r t number enumb s c x mnumber t b p s number t b p w q unumberb x number f s numberh cy number p emailaddr numbert numbert number anumbervnumb p m cnumberunumb v q numberydnumberw anumbervnumberb number gnumber i u m numberqt numbermf bq c enumberr mnumber e r c w number x number c wnumbern i u s r lt u x number anumbervnumb emailaddr r emailaddr m c x qhnumberyd number wnumberr number e vnumber f number enumberrnumb e r c w numberpnumberr mnumberu mnumbermenumberw e number wnumberk c c snumberp x number anumbervnumb p fnumberi number s qrnumber m number mnumbermenumberw e number wnumberk number s sdollar x number anumbervnumb p fnumbercnumbere qmnumber m mnumbermenumberw e number wnumberk vnumbero s enumberrnumb e r c e v unumberb numbermnumbervua vnumber emailaddr emailaddr mnumber rnumber unumb t sdollarpnumberq c enumberrnumb e r c t numbera numbervnumbernnumb i u m m numberqt number f numberql s o c enumberrnumb e r c t c dnumber numberw anumbervnumberb number g emailaddr emailaddr mnumberv p qy sdollarrnumb q enumberrnumb e r c t cdpnumberr numberw anumbervnumberb number vnumberg m numbern a numbermanumberrq number enumberrnumb e r c t cnumberx number gnumber unumber i emailaddr emailaddr emailaddr emailaddr emailaddr numbersnumberw enumb numbergnumberf s e vnumberp emailaddr emailaddr emailaddr emailaddr emailaddr mnumber emailaddr enumberrnumb e r c s s numbersnumberw enumbersnumberblx c x number anumbervnumb p c bnumbert qxnumberg numbervuo numberyt mnumberg k number t snumberq x number anumbervnumb p c c b qxnumberg number u gnumberk o c m enumberrnumb e r c tnumberr b emailaddr emailaddr emailaddr enumberrnumb e r c m dollart numberenumberr number vnumberr e m wnumbern lunumberrq number enumberrnumb e r c dollaru fnumbera m b number numberdnumbervuo numberyt s v sdollart x number anumbervnumb p numberdollarv cnumberp qd u p mnumber enumbervnumbera numberqt s emailaddr emailaddr m snumbero v enumberrnumb e r c dollaru s vnumberb number number u gnumberk numberb sdollarx x number a mnumbervnumb p number c qc w ynumbervuo numberytnumberv p eo g k onumb enumberrnumb e m r c dollaru snumberi emailaddr m gnumberlt bw x p p number emailaddr number q f dnumber number m numbern c u pnumber e snumberv s p b emailaddr p b f b m numberrnumb p numbert numberi vnumber r number q emailaddr r b numberb m number numberc emailaddr m fqonumbervm emailaddr m number bnumber numberc qu fqonumbervm gnumberltnumberrw x emailaddr s c m ao b emailaddr mnumber number qu fqonumbervm numberh number numberdl numbera i vnumber r number q emailaddr y numberv t m numbervup emailaddr m dollarrnumberfnumber numberyl v knumberw anumbervnumberk numbero s b numberz emailaddr m jnumber c number emailaddr q f d emailaddr number emailaddr emailaddr numberb m p emailaddr m rw x emailaddr x number f uo b m emailaddr m x emailaddr s number p ao number anumbertdg emailaddr emailaddr emailaddr mnumberac numberenumb numbert numbert numbert numbert numbert numbert fqvnumberw enumber u number emailaddr mnumberr v vpq fuo numberyt dnumbero f o f l number emailaddr m yonumb ernumberi numberl number r numbero dollarlnumberw p numbero dollar ct numbert numbert numbert numbert m numbert a emailaddr emailaddr emailaddr r snumber t w s fud emailaddr mnumber dnumberelqnumb snumber t emailaddr m u emailaddr emailaddr m emailaddr m numbert number k wem v p r numbert numbert numbert numbert numbert numbert numbert w y number o emailaddr r cnumbern numberdn numberi vy numbersnumb mnumberb h mnumber numberfnumberl d m r o onumberr k wem r hnumber numberfnumberl d m m emailaddr uo l number o number d numberq emailaddr um b v t u y wnumber numberymnumb m emailaddr emailaddr ia emailaddr emailaddr emailaddr emailaddr number u a b gnumber number rnumber anumberv u f tnumber o emailaddr mnumber e numbero numberi fnumber number p m vnumberu number k wem r e n k wem v p m emailaddr emailaddr p emailaddr numberi mnumber z p number znumbersqc dollarrnumberfnumberd cy dollaryo tnumberen numberd enumb numberyg emailaddr emailaddr snumber d emailaddr p p dollarv numberx b p p p ie vdz qnumber r m number p numberi b f cnumbertnumb p emailaddr p emailaddr z numberv m c s numberp fnumber b p dollarx number z emailaddr q inumb f cnumber s emailaddr p d numberwnumberanumbervlz m p p q numberv snumber numberdollarp p cnumberunumb v qnumber d fdollarp numberfnumberfnumberfnumberfnumbert m p p number c numberw numberv vnumbert p p c b f c v numberc p m p p p p p f fdollarq numberp c t numberb number f c v numberc p m p p number p p emailaddr number emailaddr p m emailaddr p p p emailaddr p p p emailaddr emailaddr numbersqc t numberw cy lnumber r numberenumbercdollar emailaddr emailaddr mnumber emailaddr r numberr emailaddr numbersqc t cnumberx numberi m lnumber emailaddr r m numberu c number p c ynumber numberq et p c r number emailaddr m sy lnumber emailaddr mnumber emailaddr r s vnumberf number p c s s emailaddr mnumberfnumberd y lnumber emailaddr m b numbersqc dollart numberenumbersi lnumber emailaddr m dollarp numberrnumbersi lnumber q number r f number p number c et p number emailaddr s numberi numbera t m p ad numberv t y numberv emailaddr emailaddr emailaddr p numbert numberinumb f c emailaddr emailaddr m x number anumbervnumb p cnumberunumb q q numberydnumberveonumbervuu numberinumbervnumberu pk numberdollaro c m enumberrnumb e r c d number s emailaddr emailaddr emailaddr emailaddr emailaddr m fnumbersnumbercnumberf ql fu number knumber rnumber unumb tnumbervnumbern vnumbero c enumberrnumb e r c w m numbereenumb numbervnumbernnumb inumberu mnumbermenumberw e number wnumberk number a sdollarr x number anumbervnumb p m cnumberunumberdollarp q numberydnumberveonumbervuu numberinumbervnumberu pk r x number anumbervnumb p cnumberv m fnumbera q gnumber unumber pnumber enumberveo s fnumbert s enumberrnumb e r c t cnumberw mnumber numberw anumbervnumb numbergnumberfnumberw anumbervnumb number p dk number d sdollart x number anumbervnumb p cnumberv m number c q gnumber unumber snumber mnumberytnumberv p qy v c sdollarq x number anumbervnumb p emailaddr enumberrnumb e r c t m numbertnumb numberw anumbervnumberb number o wnumberpnumberw anumbervnumb sdollarvnumb rnumberc enumberrnumb e r c m t numbera numberw anumbervnumberb number o wnumberpnumberw anumbervnumb s c rnumberc enumberrnumb e m r c t number r b emailaddr r emailaddr emailaddr emailaddr m u inumberql v number mnumberv u ms t s b r b enumberrnumb e r c f number y number numbersnumberw mnumberw u emailaddr qnumbercdollarpnumberc af u q number d number mnumber enumberv d gnumber lp s r x number anumbervnumb p numberf numbera qxnumberg numberu number u m gnumber numbersnumbervuo numberyt mnumberg knumberc b sdollarp enumberrnumb e r c s snumberbnumberb numbersnumberw enumbersnumberblsnumberb c m x number anumbervnumb p c s s emailaddr mnumber emailaddr r v p emailaddr m fnumberanumb s number e bmf br enumberrnumb e r c dollart numberdnumberr numbervnumbertnumberw bnumberv d mnumberk c c s b x number anumbervnumb p numberpnumberfnumberc qd u knumber nnumbervuo numberyt snumberc emailaddr emailaddr q numberv c numberonumberw anumbervnumb numberf u numberk tnumberf enumberrnumb e r c m dollarp numberrnumberr number r w numberv dnumberl snumbersx number anumbervnumb p number cnumberb qd emailaddr emailaddr m w t number n number number u gnumberknumbero m number emailaddr emailaddr m r number emailaddr i vnumber r number emailaddr dl numberc i vnumber r number emailaddr r numberp m p numbera i vnumber r number emailaddr emailaddr p b c dollarrnumberfnumberf b numberyl v knumberw anumbervnumberk cnumbero s d o mnumber number c dollarrnumberfnumber b numberyl v knumberw anumbervnumberk numbero s b number z number m p w numberb i vnumber r number q emailaddr emailaddr m number v number i vnumber r number q f d emailaddr r emailaddr e emailaddr number anumbertdg emailaddr vnumber emailaddr emailaddr emailaddr numbert numbert numbert numbert numbert numbert fqvnumberw enumber u m number emailaddr m vnumber b vnumberr v vpq fuo numberyt dnumbero f o f l number emailaddr m v t numberu yonumb ernumberi number ct numbert numbert numbert numbert numbert a o o emailaddr emailaddr r snumber t m w s fud emailaddr m emailaddr m w i am emailaddr emailaddr numberuo w s t numbert m numbert numbert numbert numbert numbert numberik wem v p r emailaddr emailaddr emailaddr emailaddr uk p m emailaddr emailaddr mnumberf u numberi b emailaddr m b emailaddr emailaddr mnumberf l ennumberf r number t number n b number w numberql f s wnumbermnumb t t numberhnumb l v emailaddr emailaddr m b wnumber numbero emailaddr m vnumberr fnumberl nnumber o number tnumberql numberyg ue emailaddr emailaddr emailaddr m pnumber a fnumberz p numberu number b emailaddr q i p number b emailaddr emailaddr m v p emailaddr p p number emailaddr p p emailaddr m number p b p p p number emailaddr emailaddr emailaddr q s b emailaddr emailaddr m tnumber k gnumberuenumberc vnumberc p d numberwnumberanumbervlz p p q u xnumbersnumberp m p cnumberunumb v q d numberp p p p p p cnumbert emailaddr m p p p b c numberfnumbersnumberc p p p p p p e emailaddr p p p number p p p numberh m number emailaddr p emailaddr p p p m p p emailaddr p emailaddr m numbersqc t numberw cy lnumber emailaddr m dollar numberi numberi lnumber emailaddr rnumber a numbernumb p fnumber emailaddr r numberenumb number p cnumberv fnumbera et mnumbersqc t cnumberwnumb y b numbersqc t cdpnumbersi lnumber r numberu dnumber p emailaddr r numberc cnumbernumb p cnumberu number r emailaddr r v p number emailaddr emailaddr q emailaddr q ad f emailaddr numbersqc dollaru snumberi y l mnumber q ac v numberi vnumber b pnumberb pnumberb tnumberb p r t number enumb s c xnumber t m b p s number t b p w q unumberb x number f s numberh cy number p number b emailaddr numbert numbert number anumbervnumb p cnumberu mnumber v q numberydnumberw anumbervnumberb number gnumber i u m numberqt numbermf bq c enumberrnumb e m r c t numberb number emailaddr mnumber emailaddr m dq q numberv l cnumberw anumbervnumb snumberq sdollarx x number anumbervnumb p fnumberi number s qr mnumber number mnumbermenumberw e number wnumberk number s sdollar x number anumbervnumb p fnumbercnumbere qm mnumber mnumbermenumberw e number wnumberk vnumbero s enumberrnumb e r c e v unumberb numbermnumbervua emailaddr emailaddr m number knumber rnumber unumb t sdollarpnumberq c enumberrnumb e r c t numbera numbervnumbernnumb i m u m numberqt number f numberql s o c enumberrnumb e r c t c dnumber numberw anumbervnumberb number emailaddr emailaddr mnumber enumberv p qy sdollarrnumb q enumberrnumb e r c t cdpnumberr numberw anumbervnumberb number m vnumberg numbern a numbermanumberrq number enumberrnumb e r c t cnumberx number gnumber u emailaddr emailaddr emailaddr emailaddr emailaddr numbersnumberw enumbersnumberblr number c m x number anumbervnumb p c bnumber number qxnumberg numbervuo numberytnumberg k vnumber snumberq x number a mnumbervnumb p c c b qxnumberg number u gnumberk o c enumberrnumb e r c tnumberr m b emailaddr q dnumber m e snumber bnumber numberv s rnumberrrnumberc enumberrnumb e r c dollarq number snumberb vupnumberv p m number emnumb numberytnumb r number t vnumberf sdollarr x number anumbervnumb p numberpnumberfnumberc qd m u knumber nnumbervuo numberyt snumberc sdollarq x number anumbervnumb p numberrnumberfdollarv qd u anumb number emailaddr q numberv c numberonumberw anumbervnumb numberf u numberk m tnumberf enumberrnumb e r c dollarp numberrnumberr number r w numberv dnumberl snumbersx number a emailaddr q number p emailaddr number number u gnumberknumbero number emailaddr emailaddr emailaddr number emailaddr i vnumber r number emailaddr m snumberi s dl numberc i vnumber r number emailaddr m c u pnumber e snumberc s r numberp p numbera i vnumber r number emailaddr m u pnumber e snumber s emailaddr m fqonumbervm p b c dollarrnumberfnumberf b numberyl v k mnumberw anumbervnumberk cnumbero s d onumb number c dollarrnumberfnumber b numberyl v knumberw anumbervnumberk numbero m s b number z emailaddr p w m numberb i vnumber r number emailaddr m b emailaddr number v number i vnumber r number emailaddr r emailaddr emailaddr numbert numbert numbert numberh end
