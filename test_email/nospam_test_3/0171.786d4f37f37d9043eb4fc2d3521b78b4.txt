 firewal digestthu number jul numbervolum number issu number in thi issu re qo fw disabl some site dnat with iptabl question re dnat with iptabl question from georg j jahchan subject re qo date thu number jul number number number number number so i m forc to conclud that the packetshap either suck in a major wai or that your explan the explan that you have been given of it is wrong sorri you ar wrong on both count explan is valid for symmetr tcp for other see explan below ye all packet in an establish tcp connect have the ack flag set so all packet except syn ar candid for delai when traffic limit ar exceed whoop you should chang that to ar alwai candid for predict or prevent delai ack ar delai per flow in such a wai that wan bound traffic reach the edg router s ethernet interfac doe not exce wan link speed no router queue it doe not wait for the link to be at or near satur to act that is why unlik queue it is predict and not reactiv it slow down the rate of transmiss of send host on a per flow basi to accommod wan link speed limit and current network util rather than fill up queue at lan speed and empti them at wan speed eventu drop the excess onc the queue s fill up inform host to slow down their rate of transmiss onc queue ar beyond a fix threshold number rate control work equal well for outbound and inbound traffic ever heard of an effect queue technolog for inbound traffic queue packet after thei have cross a congest link doe not make much sens doe it re ipsec gre or other encapsul traffic it obvious cannot dissect ipsec gre or other encapsul traffic it see the tunnel as on connect if the tunnel devic is befor the ps on the lan side vpn gatewai and router ar two separ devic ps between them if the router doe the tunnel then the ps see clear traffic typic in an organ the first scenario would be the case at headquart and the second at branch offic the ps at the branch see traffic insid the tunnel wherea the unit at hq see all traffic as on tunnel which allow full manag of both tunnel and clear traffic at both end udp and asymmetr tcp where the ps and router onli see the outgo packet return traffic come back through a satellit downlink to a station on the lan ar handl differ for asymmetr tcp it will time the releas of packet to the receiv devic therebi indirectli time the releas of acknowledg by the receiv host thi inform the sender s tcp ip stack that it should slow the releas of packet becaus limit bandwidth is avail for udp it util flow base deriv random drop it select drop onli on packet at a time from flow that ar predict to caus congest which prevent heavi retransmiss and applic timeout icmp packet exceed polici limit ar drop mayb you can do a special case for tcp and try to offload some of the queue on the endpoint but i realli don t see the real gain in that the real gain is manag and control a lan host onli know about the state of it own connect and is oblivi to wan condit until it tcp ip stack learn when router queue ar nearli full that the wan is congest a ps will predict and inform the lan host tcp ip stack of the speed limit to obei for everi connect base on polici and network condit avoid congest control for asymmetr tcp and udp mai not be as tight as for symmetr tcp but it doe work queue is akin to deploi cop onli when traffic jam occur vs rate control where cop ar perman deploi throughout town commun with each other and with a central control point predict upcom congest and regul traffic ensur a smooth flow of traffic if there is potenti for congest it will take a driver a hell of lot longer to cross town with first approach than it will with the second do you agre origin messag from mikael olsson to georg j jahchan cc firewal list sent wednesdai juli number number number number pm subject re qo georg j jahchan wrote the whole purpos of the devic is to pro activ prevent wan congest it sit between client and server client insid server outsid or client outsid server insid it doe not make ani differ and pro activ adjust the tcp window size by delai the acknowledg to get the send host to honor the speed limit for that individu connect calcul in real time base on user defin polici and current network condit umm don t get me wrong here but i think you ve been fed a less than accur sale pitch let s ponder thi for a minut the devic work by delai ack that is packet with the ack flag set right let thi sink in for a while ye all packet in an establish tcp connect have the ack flag set so all packet except syn ar candid for delai when traffic limit ar exceed whoop okai let s assum for a second that the packet aren t actual delai but that the ack sequenc number or tcp window size field ar re written dicei all you ve accomplish is move the queue delai from the traffic shaper to the endpoint you still get lnumber to lnumber delai big deal if it happen on the wire or in the stack also convinc endpoint to do delai probabl result in less than perfect shape sinc stack retransmit time suddenli affect the actual bandwidth avail rather than have the shaper itself do it the shaper know exactli when there is bandwidth avail but thi doesn t even begin to touch on other protocol like udp or icmp or for that matter ipsec gre whatev tunnel traffic neither of them have sequenc number or window size that you can manipul so i m forc to conclud that the packetshap either suck in a major wai or that your explan the explan that you have been given of it is wrong sorri what i think happen is that the delai is numbermsec as long as traffic limit aren t exceed thi is reason but when traffic exce the limit thing will begin to be queu now with a well behav tcp stack thi will mean that it will fall back to lower transmiss rate thi is how tcp wa design so that part isn t all wrong and again thi kind of shape isn t rocket scienc that is not to sai that there ar shaper out there that ar just be plain dumb alwai queue and the select what get transmit out of the queue but well i just can t see that you can get ani smarter than queue when limit ar actual exceed mayb you can do a special case for tcp and try to offload some of the queue on the endpoint but i realli don t see the real gain in that respectfulli mikael olsson mikael olsson clavist ab storgatan number box number se number number rnskldsvik sweden phone number number number number number number mobil number number number number number number fax number number number number number www httpaddr it s juli i m on vacat can t you tell firewal mail list emailaddr to unsubscrib httpaddr from hiemstra brenno subject fw disabl some site date thu number jul number number number number number the list addi chang ofcours o origin messag from hiemstra brenno sent donderdag number juli number number number to michael zhao hiemstra brenno cc emailaddr subject re disabl some site michael if i wa in your shoe i would first investig if there is a secur polici in your organis if you dont know what i mean by a secur polici i would advic you to start read about it a search on googl would be of a big help for you if there is a secur polici i would read it and investig what is tell about how employe ar abl to us their workstat for perform their function in a secur polici there should be thing what employe ar allow to do on the network internet and what not if there isnt a secur polici i would advic you to implement on in your compani becaus without on you cant punish employe by violat the polici and if there is a court case you dont have ani rock solid thing to smack around with without a polici you ar just implement solut to prevent employe in do thing that im my opinion thei arent allow to do on their workstat anywai i dont like the idea that employe plai game us kazaa icq msn etc etc in stead of work what we pai them to do thi is why a secur polici is import becaus then you can sai to employe that thei violat it and that there ar consequ for that deni internet access etc etc owke now that thi is out of the wai time to proce about the proxi thingi a proxi dont have to be the default gatewai of your network to us it it is a function in internet explor or whatev browser you us in your network if you ask me checkpoint firewal ar just good in us for what their real purpos is and that is firewal a network i dont like the idea that my firewal is also cv http thingi becaus i dont think a firewal is it purpos to do that proxi ar a much better solut for that and thei ar also develop for that purpos depend on your network setup and the os and proxi brand of your current proxi you have sever solut which wa alreadi provid by peopl on thi list my favorit proxi is squid and there ar probabl a lot of http blacklist program that work with squid to block websit and stuff i still think you should first deni direct internet traffic from workstat and onli allow traffic to the internet from server that ar allow to do so you should think about proxi email server etc etc thi should also prevent peopl from plai game especi those quak kinda game becaus those us port that arent necessari for normal webbrows game run over port number and not http relat ar block by the proxi if that proxi is a true layer number applic layer proxi these kinda proxi can view in the tcp ip packet and see if thi is legitim http traffic or that someon tri to tunnel someth over port number anywai again food for some thought regard brenno origin messag from michael zhao emailaddr sent woensdag number juli number number number to hiemstra brenno cc emailaddr subject re disabl some site thank your repli i built up my network three year ago i have proxi which we onli us cach to acceler our internet access it is not a gatewai it is too difficult to chang the topolog mani thing need to be chang did you have anoth idea to help me someon suggest me to bui the websenc but i dont have the budget right now thank a lot michael hiemstra brenno wrote michael the first thing is to build a secur polici that state what peopl ar allow to do and what not everyon need to accept thi polici and if thei violat it you can appli rule that you state in your secur polici if i had the option for your network setup i would instal a proxi server and demand everi client to connect to the proxi if thei want to us the internet the proxi will onli allow http ftp and other approv servic to connect to the internet and you can let them check to some databas which websit ar allow and deni access to site that aren t allow your compani firewal will onli allow the proxi to connect to the internet client ar deni thi wai the client cant connect directli to the internet game server and on the proxi you can deni client to connect to the game server i hope thi is an option for you regard brenno origin messag from michael zhao emailaddr sent dinsdag number juli number number number to emailaddr subject disabl some site hi all i choos checkpoint fw number as my firewal i found mani compani user plai internet game like cs ourgam i find user download their client softwar and instal on their local workstat after run it the program can connect to game server automat usal there ar mani site of everi internet game server i e i want disabl access the game server like xxx ourgam com from my intern net how can i do that except find all of their ip address becaus it is so complecat to do who can tell me regard michael firewal mail list emailaddr to unsubscrib httpaddr date thu number jul number number number number number from jerri lynd subject dnat with iptabl question howdi folk i ve been scour the onlin doc for solid info on how to accomplish dnat with iptabl essenti i have convert the ipmasqadm line of the form ipmasqadm portfw a p tcp l dollarweb out http r dollarweb in http to iptabl line of the form dollaript a prerout t nat p tcp d dollarweb out dport number j dnat to dollarweb in number with the accompani line dollaript a forward i dollarintif o dollarextif m state state establish relat j accept dollaript a forward i dollarextif o dollarintif m state state establish relat j accept dollaript a forward i dollarextif o dollarintif p tcp j accept the last two line seem function sorta redund but i threw em in in an effort to make thi work so far i am unabl to show that it s work correctli i even tri log all packet dollaript a forward i dollarintif p tcp j log log level info dollaript a forward i dollarextif p tcp j log log level info but noth show up in var log messag or anywher els for that matter thi is on a redhat number number box ani help clue flame rt hi particular fm etc ar appreci i read the list so pleas don t repli directli in addit to the list resposn thank jer from reckhard tobia subject re dnat with iptabl question date fri number jul number number number number number dollaript a prerout t nat p tcp d dollarweb out dport number j dnat to dollarweb in number with the accompani line dollaript a forward i dollarintif o dollarextif m state state establish relat j accept dollaript a forward i dollarextif o dollarintif m state state establish relat j accept dollaript a forward i dollarextif o dollarintif p tcp j accept the last two line seem function sorta redund but i threw em in in an effort to make thi work you re miss the new state the initi syn packet will not match with either of the first two rule it should match the third if it s inbound though so far i am unabl to show that it s work correctli i even tri log all packet dollaript a forward i dollarintif p tcp j log log level info dollaript a forward i dollarextif p tcp j log log level info but noth show up in var log messag or anywher els for that matter you need to insert those log rule abov ani accept reject or deni rule for them to be of ani us ar you sure the packet ar hit the box at all try move the log rule to the top of the forward chain introduc log rule to the prerout postrout input and output chain and or us tcpdump as well to see where the packet ar travel cheer tobia end of firewal digest vnumber number
